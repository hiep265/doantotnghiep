<div class="register-page-wrapper"> <div class="register-container"> <div class="register-form-box"> <h2>Register New Account</h2>
    <p class="subtitle">Create your account below</p>

    <div *ngIf="registerSuccess" class="success-message">
      Đăng ký thành công! Bạn sẽ được chuyển hướng đến trang đăng nhập...
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" *ngIf="!registerSuccess">
      <div class="input-group">
        <input
          type="text"
          placeholder="Username"
          formControlName="username"
          required
          [class.is-invalid]="username?.invalid && (username?.dirty || username?.touched)"
        />
        <i class="fas fa-user icon"></i>
        <div *ngIf="username?.invalid && (username?.dirty || username?.touched)" class="invalid-feedback">
          <small *ngIf="username?.errors?.['required']">Vui lòng nhập tên đăng nhập.</small>
          <small *ngIf="username?.errors?.['minlength']">Tên đăng nhập phải có ít nhất 3 ký tự.</small>
        </div>
      </div>

      <div class="input-group">
        <input
          type="email"
          placeholder="Email"
          formControlName="email"
          required
          [class.is-invalid]="email?.invalid && (email?.dirty || email?.touched)"
        />
        <i class="fas fa-envelope icon"></i>
        <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="invalid-feedback">
          <small *ngIf="email?.errors?.['required']">Vui lòng nhập email.</small>
          <small *ngIf="email?.errors?.['email']">Email không hợp lệ.</small>
        </div>
      </div>

      <div class="input-group">
        <input
          type="password"
          placeholder="Password"
          formControlName="password"
          required
          [class.is-invalid]="password?.invalid && (password?.dirty || password?.touched)"
        />
        <i class="fas fa-lock icon"></i>
        <div *ngIf="password?.invalid && (password?.dirty || password?.touched)" class="invalid-feedback">
          <small *ngIf="password?.errors?.['required']">Vui lòng nhập mật khẩu.</small>
          <small *ngIf="password?.errors?.['minlength']">Mật khẩu phải có ít nhất 6 ký tự.</small>
        </div>
      </div>

       <div class="input-group">
        <input
          type="password"
          placeholder="Confirm Password"
          formControlName="confirmPassword"
          required
          [class.is-invalid]="(confirmPassword?.invalid || registerForm.errors?.['passwordsNotMatching']) && (confirmPassword?.dirty || confirmPassword?.touched)"
        />
        <i class="fas fa-check-circle icon"></i> <div *ngIf="(confirmPassword?.invalid || registerForm.errors?.['passwordsNotMatching']) && (confirmPassword?.dirty || confirmPassword?.touched)" class="invalid-feedback">
          <small *ngIf="confirmPassword?.errors?.['required']">Vui lòng xác nhận mật khẩu.</small>
          <small *ngIf="registerForm.errors?.['passwordsNotMatching'] && !confirmPassword?.errors?.['required']">Mật khẩu không khớp.</small>
        </div>
      </div>

      <div *ngIf="registerError" class="error-message">
        {{ registerError }}
      </div>

      <button type="submit" class="register-button" [disabled]="registerForm.invalid || isLoading">
        <span *ngIf="!isLoading">Register</span>
        <span *ngIf="isLoading">
          <i class="fas fa-spinner fa-spin"></i> Registering...
        </span>
      </button>

      <p class="login-link">
        Already have an account? <a routerLink="/login">Login here</a>
      </p>
    </form>
  </div>
   </div>
</div>
